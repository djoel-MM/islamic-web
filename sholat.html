<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="src/output.css" rel="stylesheet">
</head>

<body>

    <header class="relative w-full h-150 bg-cover bg-center flex-none p-2" id="background">
        <nav class="flex justify-center">
            <div class="  flex justify-center gap-8 p-6">
                <a href="index.html" class="text-white font-semibold text-lg hover:text-yellow-200 transition">Home</a>
                <a href="#" class="text-white font-semibold text-lg hover:text-yellow-200 transition">Daftar</a>
                <a href="#" class="text-white font-semibold text-lg hover:text-yellow-200 transition">Bantuan</a>
            </div>
            <div>
                <button>
                    <img src="img/heart-regular-full.svg">
                </button>
            </div>
        </nav>
        <div class="flex justify-center">
            <div class=" z-10  bg-white/20 py-4 rounded-2xl shadow-lg backdrop-blur-md w-110 flex flex-col ">
                <span id="current-time" class="text-8xl font-light text-center  ">. : : </span>
                <article class="font-medium text-4xl text-center">jadwal :</article>
                <ul class="font-extralight text-3xl text-center">
                    <li id="shecedule"></li>
                </ul>

            </div>

        </div>

        <script>

            function updateTimeAndBackground() {
                const now = new Date();
                const hour = now.getHours();

                // update waktu
                const hours = String(hour).padStart(2, '0');
                const minutes = String(now.getMinutes()).padStart(2, '0');
                const seconds = String(now.getSeconds()).padStart(2, '0');
                document.getElementById("current-time").textContent = `${hours}:${minutes}:${seconds}`;

                // ambil elemen header
                const header = document.getElementById("background");
                const schedule = document.getElementById("shecedule");

                // ganti background + teks sesuai waktu
                if (hour >= 4 && hour < 6) {
                    header.style.backgroundImage = "url('img/pagi.png')";
                    schedule.textContent = " Dzikir Pagi";
                } else if (hour >= 6 && hour < 12) {
                    header.style.backgroundImage = "url('img/pagi.png')";
                    schedule.textContent = " Waktu Belajar & Amal Shalih";
                } else if (hour >= 12 && hour < 15) {
                    header.style.backgroundImage = "url('img/pagi.png')";
                    schedule.textContent = " Shalat Dzuhur & Istirahat";
                } else if (hour >= 15 && hour < 18) {
                    header.style.backgroundImage = "url('img/pagi.png')";
                    schedule.textContent = " Dzikir Petang & Asar";
                } else if (hour >= 18 && hour < 20) {
                    header.style.backgroundImage = "url('img/pagi.png')";
                    schedule.textContent = " Shalat Maghrib & Dzikir Malam";
                } else {
                    header.style.backgroundImage = "url('img/malam.png')";
                    schedule.textContent = " Istirahat & Qiyamul Lail";
                }

                header.style.backgroundSize = "cover";
                header.style.backgroundPosition = "center";
                header.style.transition = "background-image 1s ease-in-out";
            }

            updateTimeAndBackground();
            setInterval(updateTimeAndBackground, 1000);
        </script>


        <section class="flex flex-col items-center mt-10 gap-6">

    <!-- INFO -->
    <div class="text-center">
        <h2 id="status" class="text-xl text-white font-light"></h2>
        <p id="countdown" class="text-white mt-1"></p>
    </div>

    <!-- TIMELINE PROGRESS BAR -->
    <div class="w-full h-7 bg-amber-50 px-2 py-1 rounded-2xl">
        <div id="timeline" class="h-full bg-blue-500 w-0 transition-all duration-500 rounded-2xl"></div>
    </div>

    <!-- DOTS -->
    <div class="relative flex justify-between items-center w-full">

        <div class="flex flex-col items-center gap-2">
            <div class="dot w-7 h-7 rounded-full bg-blue-300 border-4 border-white shadow-md transition-all duration-300"></div>
            <h3 id="time-subuh" class="label text-white text-sm">Subuh</h3>
        </div>

        <div class="flex flex-col items-center gap-2">
            <div class="dot w-7 h-7 rounded-full bg-blue-300 border-4 border-white shadow-md transition-all duration-300"></div>
            <h3 id="time-dzuhur" class="label text-white text-sm">Dzuhur</h3>
        </div>

        <div class="flex flex-col items-center gap-2">
            <div class="dot w-7 h-7 rounded-full bg-blue-300 border-4 border-white shadow-md transition-all duration-300"></div>
            <h3 id="time-ashar" class="label text-white text-sm">Ashar</h3>
        </div>

        <div class="flex flex-col items-center gap-2">
            <div class="dot w-7 h-7 rounded-full bg-blue-300 border-4 border-white shadow-md transition-all duration-300"></div>
            <h3 id="time-maghrib" class="label text-white text-sm">Maghrib</h3>
        </div>

        <div class="flex flex-col items-center gap-2">
            <div class="dot w-7 h-7 rounded-full bg-blue-300 border-4 border-white shadow-md transition-all duration-300"></div>
            <h3 id="time-isya" class="label text-white text-sm">Isya</h3>
        </div>

    </div>

</section>

        <script>
        let jadwalAPI = {};

async function loadJadwal() {
    const res = await fetch(
        "https://api.aladhan.com/v1/timingsByCity?city=Jakarta&country=Indonesia&method=2"
    );
    const data = await res.json();
    const t = data.data.timings;

    jadwalAPI = {
        subuh: t.Fajr,
        dzuhur: t.Dhuhr,
        ashar: t.Asr,
        maghrib: t.Maghrib,
        isya: t.Isha
    };

    document.getElementById("time-subuh").textContent = `Subuh ${t.Fajr}`;
    document.getElementById("time-dzuhur").textContent = `Dzuhur ${t.Dhuhr}`;
    document.getElementById("time-ashar").textContent = `Ashar ${t.Asr}`;
    document.getElementById("time-maghrib").textContent = `Maghrib ${t.Maghrib}`;
    document.getElementById("time-isya").textContent = `Isya ${t.Isha}`;
}

function toSec(str) {
    const [h, m] = str.split(":").map(Number);
    return h * 3600 + m * 60;
}

function updateTimeline() {
    if (!jadwalAPI.subuh) return; // API belum masuk

    const now = new Date();
    const nowSec = now.getHours() * 3600 + now.getMinutes() * 60 + now.getSeconds();

    const posisi = {
        subuh: 10,
        dzuhur: 35,
        ashar: 60,
        maghrib: 80,
        isya: 100
    };

    const jadwal = [
        { id: "subuh", start: toSec(jadwalAPI.subuh), pos: 10 },
        { id: "dzuhur", start: toSec(jadwalAPI.dzuhur), pos: 35 },
        { id: "ashar", start: toSec(jadwalAPI.ashar), pos: 60 },
        { id: "maghrib", start: toSec(jadwalAPI.maghrib), pos: 80 },
        { id: "isya", start: toSec(jadwalAPI.isya), pos: 100 }
    ];

    // Tambahkan end = waktu selanjutnya
    for (let i = 0; i < jadwal.length - 1; i++) {
        jadwal[i].end = jadwal[i + 1].start;
    }
    jadwal[jadwal.length - 1].end = 24 * 3600; // isya

    // RESET semua dot & label
    document.querySelectorAll(".dot").forEach(e => e.classList.remove("active"));
    document.querySelectorAll(".label").forEach(e => e.classList.remove("active"));

    let progress = 0;
    let active = "";
    let nextSholat = "";
    let nextTime = 0;

    for (let i = 0; i < jadwal.length; i++) {
        const j = jadwal[i];

        if (nowSec >= j.start && nowSec < j.end) {
            active = j.id;

            const percentage = (nowSec - j.start) / (j.end - j.start);
            progress = percentage * (j.pos - (i === 0 ? 0 : jadwal[i - 1].pos))
                     + (i === 0 ? 0 : jadwal[i - 1].pos);

            nextSholat = jadwal[i + 1] ? jadwal[i + 1].id : "subuh";
            nextTime = jadwal[i + 1] ? jadwal[i + 1].start : toSec(jadwalAPI.subuh) + 86400;
            break;
        }
        if (nowSec >= j.end) progress = j.pos;
    }

    document.getElementById("timeline").style.width = `${progress}%`;

    if (active) {
        const label = document.getElementById(`time-${active}`);
        label.classList.add("active");

        const dot = label.previousElementSibling;
        dot.classList.add("active");

        document.getElementById("status").textContent = `Sekarang waktu ${active}`;
    }

    // COUNTDOWN
    const sisa = nextTime - nowSec;
    const h = Math.floor(sisa / 3600);
    const m = Math.floor((sisa % 3600) / 60);
    const ss = sisa % 60;

    document.getElementById("countdown").textContent =
        `Menuju ${nextSholat}: ${h}j ${m}m ${ss}d`;
}

(async () => {
    await loadJadwal();
    updateTimeline();
    setInterval(updateTimeline, 1000);
})();

</script>
    </header>
    <section class="flex gap-5 justify-center">
        <div class="bg-green-50 rounded-3xl w-full lg:w-80 h-32 p-5 shadow-md hover:shadow-lg transition">
        <h3 class="font-semibold text-green-700 mb-2">tata cara sholat</h3>
        <p class="text-gray-700 text-sm">
          Setiap ibadah dimulai dari hati yang lurus dan niat karena Allah semata.
        </p>
      </div>

      <div class="bg-green-50 rounded-3xl w-full lg:w-80 h-32 p-5 shadow-md hover:shadow-lg transition">
        <h3 class="font-semibold text-green-700 mb-2">PDF. Hiznul muslim</h3>
        <p class="text-gray-700 text-sm">
         menambah pengetahuan tentang doa doa nabi, membuat hidup berkah dan bermakna
        </p>
      </div>
    </section>


</body>

</html>