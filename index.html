<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>finall project</title>
    <link href="./src/output.css" rel="stylesheet">
</head>

<body>
    <header class="relative w-full h-150 bg-cover bg-center flex-none p-2" id="background">

        <nav class="flex justify-center">
            <div class="  flex justify-center gap-8 p-6">
                <a href="#" class="text-white font-semibold text-lg hover:text-yellow-200 transition">Home</a>
                <a href="#" class="text-white font-semibold text-lg hover:text-yellow-200 transition">Daftar</a>
                <a href="#" class="text-white font-semibold text-lg hover:text-yellow-200 transition">Bantuan</a>
            </div>
            <div>
                <button>
                    <img src="img/heart-regular-full.svg">
                </button>
            </div>
        </nav>
        <div class="flex justify-between">
            <div class=" z-10  bg-white/20 px-6 py-2 rounded-2xl shadow-lg backdrop-blur-md w-110 flex flex-col ">
                <span id="current-time" class="text-8xl font-light ">. : : </span>
                <article class="font-medium text-4xl text-center">jadwal :</article>
                <ul class="font-extralight text-3xl text-center">
                    <li id="shecedule"></li>
                </ul>

            </div>

            <script>

                function updateTimeAndBackground() {
                    const now = new Date();
                    const hour = now.getHours();

                    // update waktu
                    const hours = String(hour).padStart(2, '0');
                    const minutes = String(now.getMinutes()).padStart(2, '0');
                    const seconds = String(now.getSeconds()).padStart(2, '0');
                    document.getElementById("current-time").textContent = `${hours}:${minutes}:${seconds}`;

                    // ambil elemen header
                    const header = document.getElementById("background");
                    const schedule = document.getElementById("shecedule");

                    // ganti background + teks sesuai waktu
                    if (hour >= 4 && hour < 6) {
                        header.style.backgroundImage = "url('img/pagi.png')";
                        schedule.textContent = " Dzikir Pagi";
                    } else if (hour >= 6 && hour < 12) {
                        header.style.backgroundImage = "url('img/pagi.png')";
                        schedule.textContent = " Waktu Belajar & Amal Shalih";
                    } else if (hour >= 12 && hour < 15) {
                        header.style.backgroundImage = "url('img/pagi.png')";
                        schedule.textContent = " Shalat Dzuhur & Istirahat";
                    } else if (hour >= 15 && hour < 18) {
                        header.style.backgroundImage = "url('img/pagi.png')";
                        schedule.textContent = " Dzikir Petang & Asar";
                    } else if (hour >= 18 && hour < 20) {
                        header.style.backgroundImage = "url('img/pagi.png')";
                        schedule.textContent = " Shalat Maghrib & Dzikir Malam";
                    } else {
                        header.style.backgroundImage = "url('img/malam.png')";
                        schedule.textContent = " Istirahat & Qiyamul Lail";
                    }

                    header.style.backgroundSize = "cover";
                    header.style.backgroundPosition = "center";
                    header.style.transition = "background-image 1s ease-in-out";
                }

                updateTimeAndBackground();
                setInterval(updateTimeAndBackground, 1000);
            </script>
        </div>
        <section class="w-full flex justify-center">
            <div class="w-full max-w-5xl px-6 py-12 text-center">
                <h1 class="text-2xl font-bold text-center mb-10 text-white">
                    waktu sholat
                </h1>

                <!-- Garis horizontal -->
                <div class="relative flex justify-center items-center">
                    <!-- Garis dasar -->
                    <div class="absolute top-1/2 left-0 w-full h-1 bg-gray-200 rounded-full transform -translate-y-1/2">
                    </div>

                    <!-- Garis progress -->
                    <div id="progress"
                        class="absolute top-1/2 left-0 h-1 bg-blue-500 rounded-full transform -translate-y-1/2 transition-all duration-700 w-0">
                    </div>

                    <!-- Titik & Nama Jadwal -->
                    <div class="relative flex justify-between items-center w-full max-w-4xl flex-wrap">
                        <div class="flex flex-col items-center">
                            <div class="dot w-8 h-8 bg-blue-300 rounded-full border-4 border-white shadow-md"></div>
                            <h3 id="time-subuh" class="mt-3 text-white text-lg font-light">Subuh</h3>
                        </div>
                        <div class="flex flex-col items-center">
                            <div class="dot w-8 h-8 bg-blue-300 rounded-full border-4 border-white shadow-md"></div>
                            <h3 id="time-dzuhur" class="mt-3 text-white text-lg font-light">Dzuhur</h3>
                        </div>
                        <div class="flex flex-col items-center">
                            <div class="dot w-8 h-8 bg-blue-300 rounded-full border-4 border-white shadow-md"></div>
                            <h3 id="time-ashar" class="mt-3 text-white text-lg font-light">Ashar</h3>
                        </div>
                        <div class="flex flex-col items-center">
                            <div class="dot w-8 h-8 bg-blue-300 rounded-full border-4 border-white shadow-md"></div>
                            <h3 id="time-maghrib" class="mt-3 text-white text-lg font-light">Maghrib</h3>
                        </div>
                        <div class="flex flex-col items-center">
                            <div class="dot w-8 h-8 bg-blue-300 rounded-full border-4 border-white shadow-md"></div>
                            <h3 id="time-isya" class="mt-3 text-white text-lg font-light">Isya</h3>
                        </div>
                    </div>
                </div>
            </div>
        </section>


        <script>
            function updateSholatTimeline() {
                const now = new Date();
                const hour = now.getHours();
                const progress = document.getElementById("progress");

                // Jadwal (posisi disesuaikan untuk garis horizontal)
                const jadwal = [
                    { id: "subuh", start: 4, end: 6, pos: 10 },
                    { id: "dzuhur", start: 12, end: 15, pos: 35 },
                    { id: "ashar", start: 15, end: 18, pos: 60 },
                    { id: "maghrib", start: 18, end: 19, pos: 80 },
                    { id: "isya", start: 19, end: 24, pos: 100 },
                ];

                // Reset semua
                document.querySelectorAll(".dot").forEach(dot => dot.classList.remove("bg-blue-600"));
                jadwal.forEach(j => {
                    const el = document.getElementById(`time-${j.id}`);
                    el.classList.remove("text-2xl", "font-bold", "text-blue-600");
                    el.classList.add("text-gray-700", "text-lg", "font-light");
                });

                let aktif = "";
                let lebar = 0;
                for (const j of jadwal) {
                    if (hour >= j.start && hour < j.end) {
                        aktif = j.id;
                        lebar = j.pos;
                        break;
                    }
                    if (hour >= j.end) lebar = j.pos;
                }

                progress.style.width = `${lebar}%`;

                // Ubah tampilan aktif
                if (aktif) {
                    const aktifEl = document.getElementById(`time-${aktif}`);
                    aktifEl.classList.remove("text-lg", "font-light", "text-gray-700");
                    aktifEl.classList.add("text-2xl", "font-bold", "text-blue-600", "transition-all", "duration-500");

                    const aktifDot = aktifEl.previousElementSibling;
                    aktifDot.classList.add("bg-blue-600");
                }
            }

            updateSholatTimeline();
            setInterval(updateSholatTimeline, 1000 * 60);
        </script>

    </header>







    <section class="w-full max-w-6xl mx-auto p-2">
        <h1 class="text-3xl font-bold text-amber-600 mb-8 text-center">Jadwal Kajian Dakwah</h1>

        <div class="flex gap-6 overflow-x-auto flex-nowrap  py-4 scrollbar-thin scrollbar-thumb-amber-400 scrollbar-track-amber-100"
            id="kajianWrapper">
            <!-- Tombol tambah (selalu muncul di awal) -->
            <div id="openModalBtn"
                class="cursor-pointer bg-white/80 backdrop-blur-md border border-amber-100 shadow-lg hover:shadow-2xl rounded-3xl w-64 p-5 flex-shrink-0 flex flex-col items-center transition-all duration-300 hover:scale-105">
                <div class="bg-amber-100 rounded-full p-4 mb-4">
                    <img src="img/istockphoto-1034906324-612x612-removebg-preview.png" alt="icon"
                        class="w-16 h-16 object-contain" />
                </div>
                <h2 class="text-lg font-semibold text-gray-800 mb-1 text-center">
                    Infokan Kajianmu
                </h2>
                <p class="text-sm text-gray-500 text-center">
                    Sebarkan kebaikan dengan memposting poster kajian.
                </p>
            </div>

            <!-- TEMPAT CARD KAJIAN -->
            <div id="kajianContainer" class="flex gap-6 flex-nowrap"></div>
        </div>

        <!-- MODAL -->
        <div id="modal" class="fixed inset-0 bg-black/40 backdrop-blur-md hidden flex justify-center items-center z-50">
            <div class="bg-white rounded-3xl shadow-2xl w-96 p-6 animate-[fadeIn_0.3s_ease]">
                <h2 class="text-xl font-semibold text-center text-amber-600 mb-4">
                    Tambah Kajian Baru
                </h2>
                <form id="kajianForm" class="flex flex-col gap-3">
                    <input type="file" id="poster" accept="image/*" class="border rounded-lg p-2" required />
                    <input type="text" id="judul" placeholder="Judul Kajian" class="border rounded-lg p-2" required />
                    <input type="text" id="lokasi" placeholder="Lokasi Kajian" class="border rounded-lg p-2" required />
                    <input type="datetime-local" id="waktu" class="border rounded-lg p-2" required />
                    <textarea id="deskripsi" placeholder="Deskripsi singkat kajian..." class="border rounded-lg p-2"
                        required></textarea>
                    <input type="text" id="kontak" placeholder="No Penanggung Jawab" class="border rounded-lg p-2"
                        required />
                    <div class="flex justify-end gap-3 mt-3">
                        <button type="button" id="closeModalBtn"
                            class="px-4 py-2 bg-gray-200 rounded-lg hover:bg-gray-300 transition">
                            Batal
                        </button>
                        <button type="submit"
                            class="px-4 py-2 bg-amber-500 text-white rounded-lg hover:bg-amber-600 transition">
                            Simpan
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </section>


    <style>
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: scale(0.95);
            }

            to {
                opacity: 1;
                transform: scale(1);
            }
        }
    </style>

    <script>
        const openModalBtn = document.getElementById("openModalBtn");
        const closeModalBtn = document.getElementById("closeModalBtn");
        const modal = document.getElementById("modal");
        const form = document.getElementById("kajianForm");
        const container = document.getElementById("kajianContainer");

        // === Buka & Tutup Modal ===
        openModalBtn.onclick = () => modal.classList.remove("hidden");
        closeModalBtn.onclick = () => modal.classList.add("hidden");

        // === Ambil data dari LocalStorage ===
        window.addEventListener("DOMContentLoaded", () => {
            const dataKajian = JSON.parse(localStorage.getItem("kajianList")) || [];
            dataKajian.forEach(addKajianCard);
        });

        // === Simpan data baru ===
        form.addEventListener("submit", (e) => {
            e.preventDefault();

            const posterFile = document.getElementById("poster").files[0];
            if (!posterFile) return alert("Pilih poster dulu!");

            const reader = new FileReader();
            reader.onload = () => {
                const posterBase64 = reader.result;

                const newKajian = {
                    id: Date.now(),
                    judul: form.judul.value,
                    lokasi: form.lokasi.value,
                    waktu: form.waktu.value,
                    kontak: form.kontak.value,
                    deskripsi: form.deskripsi.value,
                    poster_url: posterBase64
                };

                const dataKajian = JSON.parse(localStorage.getItem("kajianList")) || [];
                dataKajian.unshift(newKajian);
                localStorage.setItem("kajianList", JSON.stringify(dataKajian));

                addKajianCard(newKajian);
                form.reset();
                modal.classList.add("hidden");
            };
            reader.readAsDataURL(posterFile);
        });

        // === Tambah card ke tampilan ===
        function addKajianCard(k) {
            const el = document.createElement("div");
            el.className = "bg-white/80 border border-amber-100 rounded-3xl shadow-lg hover:shadow-2xl w-64 overflow-hidden transition hover:-translate-y-1";
            el.innerHTML = `
        <img src="${k.poster_url}" class="w-full h-40 object-cover" alt="Poster">
        <div class="p-4 flex flex-col">
          <h3 class="font-semibold text-gray-800 text-lg mb-1">${k.judul}</h3>
          <p class="text-sm text-gray-500 mb-2">${k.lokasi}</p>
          <p class="text-xs text-gray-400 mb-3">${new Date(k.waktu).toLocaleString()}</p>
          <a href="detail.html?id=${k.id}" class="block text-center bg-amber-500 text-white py-2 rounded-lg hover:bg-amber-600">Lihat Detail</a>
        </div>
      `;
            container.appendChild(el);
        }
    </script>

    
</body>

</html>